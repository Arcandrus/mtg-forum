{% extends "base.html" %}

{% block head_title %}Sign In{% endblock %}

{% block content %}

<div class="container scroll content">
    <div class="row">
        <div class="col-md-8 mt-3 offset-md-2">
            <h3>Sign In</h3>

            <p>
                Welcome back to MTG Forum. To leave a comment or like a post, please log in. If
                you have not created an account yet, then <a class="link" href="{{ signup_url }}">sign up</a>
                first.
            </p>
        </div>
    </div>
    <div class="row">
        <div class="col-md-8 mt-3 offset-md-2">
            <form method="POST" enctype="multipart/form-data" class="w-100" style="max-width: 600px;">
                {% csrf_token %}

                <!-- Full Name -->
                <div class="mb-3 d-flex align-items-center">
                    {{ form.full_name.label_tag }}
                    <div class="flex-grow-1 ms-3">
                        {{ form.full_name }}
                        {{ form.full_name.errors }}
                    </div>
                </div>

                <!-- Username -->
                <div class="mb-3 d-flex align-items-center">
                    {{ form.username.label_tag }}
                    <div class="flex-grow-1 ms-3">
                        {{ form.username }}
                        {{ form.username.errors }}
                    </div>
                </div>

                <!-- Email -->
                <div class="mb-3 d-flex align-items-center">
                    {{ form.email.label_tag }}
                    <div class="flex-grow-1 ms-3">
                        {{ form.email }}
                        {{ form.email.errors }}
                    </div>
                </div>

                <!-- Profile Picture with label above and image preview -->
                <div class="mb-3">
                    <div class="mb-2 fw-bold">
                        {{ form.profile_picture.label_tag }}
                    </div>
                    <div class="d-flex align-items-start">
                        {% if user.profile_picture %}
                        <div>
                            <img src="{{ user.profile_picture.url }}" alt="Current Profile Picture"
                                class="img-thumbnail" style="max-width: 150px;">
                        </div>
                        {% endif %}
                        <div class="ms-4 flex-grow-1">
                            <div class="form-control p-2">
                                {{ form.profile_picture }}
                            </div>
                            <div class="text-danger small mt-1">
                                {{ form.profile_picture.errors }}
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Clear Profile Picture Checkbox -->
                <div class="mb-3 d-flex align-items-center checkbox-inline">
                    {{ form.clear_profile_picture.label_tag }}
                    {{ form.clear_profile_picture }}
                </div>

                <!-- Submit Button -->
                <button class="btn btn-primary float-end mt-3" type="submit">Update</button>
            </form>

        </div>
    </div>
</div>

{% endblock %}